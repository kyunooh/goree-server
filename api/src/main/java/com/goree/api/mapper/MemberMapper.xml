<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.goree.api.mapper.MemberMapper">
  <resultMap type="com.goree.api.domain.Member" id="Member">
    <id column="id" property="id" />
    <result column="email" property="email" />
    <result column="full_name" property="fullName" />
    <result column="facebook" property="facebook" />
    <result column="twitter" property="twitter" />
    <result column="kakaotalk" property="kakaotalk" />
    <result column="age" property="age" />
    <result column="gender" property="gender" />
    <result column="phone" property="phone" />
  </resultMap>
  <resultMap type="com.goree.api.domain.Group" id="Group">
    <id column="id" property="id" />
    <result column="name" property="name" />
    <result column="description" property="description" />
  </resultMap>
  <resultMap type="com.goree.api.domain.Group" id="GroupWithMember">
    <id column="id" property="id" />
    <result column="name" property="name" />
    <result column="description" property="description" />
    <collection property="member" resultMap="Member" />
  </resultMap>
  <insert id="insertMember" parameterType="com.goree.api.domain.Member" >
    INSERT INTO 
            member (email, password, full_name, facebook, twitter, kakaotalk, age, gender, phone) 
        values
                   (#{email},#{password},#{fullName},#{facebook},#{twitter},#{kakaotalk},#{age},#{gender},#{phone})
  </insert>
  <select id="selectMemberByEmail" parameterType="string" resultMap="Member">
    SELECT * FROM member WHERE email = #{email}
  </select>
</mapper>